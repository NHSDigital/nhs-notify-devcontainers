ARG BASE_CONTAINER_NAME
ARG CONTAINER_NAME
ARG BASE_IMAGE_TAG
ARG BASE_CONTAINER_PREFIX
ARG SCRIPTS_DIR=/usr/local/share/nhsnotify

FROM ${BASE_CONTAINER_PREFIX}${BASE_CONTAINER_NAME}:${BASE_IMAGE_TAG}
ARG BASE_CONTAINER_NAME
ARG CONTAINER_NAME
ARG BASE_IMAGE_TAG
ARG BASE_CONTAINER_PREFIX
ARG SCRIPTS_DIR

RUN test -n ${BASE_CONTAINER_NAME}
RUN test -n ${CONTAINER_NAME}
RUN test -n ${BASE_IMAGE_TAG}
RUN test -n ${BASE_CONTAINER_PREFIX}

ENV BASE_IMAGE_TAG=${BASE_IMAGE_TAG}

COPY scripts ${SCRIPTS_DIR}/${CONTAINER_NAME}
WORKDIR ${SCRIPTS_DIR}/${CONTAINER_NAME}
RUN ./install.sh
